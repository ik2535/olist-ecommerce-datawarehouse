# 🧪 dbt Test Suite Documentation\n\n## Overview\nComprehensive data quality tests for the Olist data warehouse covering all layers from raw sources to final marts.\n\n## Test Categories\n\n### 📊 **Data Integrity Tests**\n- **Unique constraints**: Primary keys (customer_id, order_id, product_id)\n- **Not null constraints**: Critical business fields\n- **Referential integrity**: Foreign key relationships between tables\n\n### 🎯 **Business Logic Tests**\n- **Accepted values**: Payment types, order statuses, review scores\n- **Range validation**: Payment amounts, review scores, installments\n- **Business rules**: Delivered orders must have delivery dates\n\n### 🔄 **Data Quality Tests**\n- **Freshness**: Ensure streaming data is recent\n- **Completeness**: No missing critical data\n- **Consistency**: Data relationships are maintained\n\n### ⚡ **Streaming Data Tests**\n- **Kafka data validation**: Payment stream integrity\n- **Real-time data checks**: Recent payment data exists\n- **Event ordering**: Payment sequential numbers\n\n## Test Coverage by Layer\n\n### **Staging Layer (stg_*)**\n- Primary key uniqueness\n- Foreign key relationships\n- Data type validation\n- Business value constraints\n\n### **Marts Layer (dim_*, fct_*)**\n- Dimensional integrity\n- Fact table relationships\n- Aggregation validation\n- Business metric ranges\n\n### **Source Layer (raw_*)**\n- Source data validation\n- API data integrity\n- Streaming data checks\n\n## Running Tests\n\n```bash\n# Install dependencies\ndbt deps\n\n# Run all tests\ndbt test\n\n# Run tests for specific models\ndbt test --models staging\ndbt test --models marts\n\n# Run tests with different severities\ndbt test --warn-error  # Treat warnings as errors\n```\n\n## Expected Test Results\n- **✅ PASS**: Data meets quality standards\n- **⚠️ WARN**: Data issues that don't break pipeline\n- **❌ FAIL**: Critical data quality issues\n\n## Key Test Metrics\n- **80+ individual tests** across all models\n- **100% primary key coverage** with uniqueness tests\n- **Complete referential integrity** validation\n- **Business rule enforcement** for critical fields\n